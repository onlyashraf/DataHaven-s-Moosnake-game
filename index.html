<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <title>Moosnake Game with Key Power-Up</title>
Â  <style>
Â  Â  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
Â  Â  html, body {
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  Â  width: 100%;
Â  Â  Â  height: 100%;
Â  Â  Â  overflow: hidden;
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  }
Â  Â  body {
Â  Â  Â  background: url("better.png") no-repeat center center fixed;
Â  Â  Â  background-size: cover;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: flex-start;
Â  Â  Â  text-align: center;
Â  Â  }
Â  Â  #logo {
Â  Â  Â  display: block;
Â  Â  Â  margin: 10px auto;
Â  Â  Â  width: 100px;
Â  Â  Â  height: auto;
Â  Â  }
Â  Â  h1 {
Â  Â  Â  font-family: 'Press Start 2P', cursive;
Â  Â  Â  font-size: 22px;
Â  Â  Â  color: #ffb703;
Â  Â  Â  text-shadow: 3px 3px 0px #fb8500, 6px 6px 0px #023047;
Â  Â  Â  margin-bottom: 5px;
Â  Â  Â  letter-spacing: 2px;
Â  Â  }
Â  Â  h2 {
Â  Â  Â  font-family: 'Press Start 2P', cursive;
Â  Â  Â  font-size: 14px;
Â  Â  Â  color: #fb8500;
Â  Â  Â  text-shadow: 1px 1px 0px #023047;
Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  letter-spacing: 1px;
Â  Â  }
Â  Â  .game-container {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: flex-start;
Â  Â  Â  justify-content: center;
Â  Â  Â  gap: 20px;
Â  Â  Â  margin-top: 10px;
Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  max-width: 100%;
Â  Â  }
Â  Â  canvas {
Â  Â  Â  background: linear-gradient(145deg, #0d1b2a, #1b263b);
Â  Â  Â  border: 3px solid #415a77;
Â  Â  Â  border-radius: 15px;
Â  Â  Â  box-shadow: 0px 0px 25px rgba(0, 0, 0, 0.6),
Â  Â  Â  Â  Â  Â  Â  Â  Â  0px 0px 50px rgba(65, 90, 119, 0.4) inset;
Â  Â  Â  display: block;
Â  Â  Â  max-width: 100%;
Â  Â  Â  height: auto;
Â  Â  Â  touch-action: none;
Â  Â  }
Â  Â  #ui {
Â  Â  Â  margin-top: 15px;
Â  Â  Â  text-align: center;
Â  Â  }
Â  Â  #score {
Â  Â  Â  display: none; /* now we draw score inside canvas */
Â  Â  }
Â  Â  button {
Â  Â  Â  background: #ffb703;
Â  Â  Â  border: none;
Â  Â  Â  padding: 10px 20px;
Â  Â  Â  font-size: 16px;
Â  Â  Â  margin: 5px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background 0.2s ease-in-out, transform 0.15s ease-in-out;
Â  Â  }
Â  Â  button:hover {
Â  Â  Â  background: #fb8500;
Â  Â  Â  transform: scale(1.05);
Â  Â  }
Â  Â  .side-panel {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 15px;
Â  Â  }
Â  Â  .side-box {
Â  Â  Â  width: 180px;
Â  Â  Â  font-family: 'Press Start 2P', cursive;
Â  Â  Â  font-size: 10px;
Â  Â  Â  background: rgba(255, 255, 255, 0.8);
Â  Â  Â  color: #023047;
Â  Â  Â  border: 2px solid #415a77;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  padding: 10px;
Â  Â  Â  text-align: left;
Â  Â  Â  line-height: 1.5;
Â  Â  }
Â  Â  .side-box h3 {
Â  Â  Â  font-size: 12px;
Â  Â  Â  margin-bottom: 5px;
Â  Â  Â  text-align: center;
Â  Â  Â  color: #fb8500;
Â  Â  Â  text-shadow: 1px 1px 0px #023047;
Â  Â  }
Â  Â  #tomatoMan {
Â  Â  Â  width: 160px;
Â  Â  Â  height: auto;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  border: 2px solid #415a77;
Â  Â  Â  box-shadow: 0px 0px 12px rgba(0,0,0,0.4);
Â  Â  }
Â  </style>
</head>
<body>
Â  <img src="9YuEYF8-_400x400.jpg" alt="DataHaven Logo" id="logo">
Â  <h1>ğŸ« DataHaven's Moosnake Game</h1>
Â  <h2>BY: TOMATO MAN</h2>

Â  <div class="game-container">
Â  Â  <div class="side-box">
Â  Â  Â  <h3>ğŸ® Controls</h3>
Â  Â  Â  â†‘ / W = Up<br>
Â  Â  Â  â†“ / S = Down<br>
Â  Â  Â  â† / A = Left<br>
Â  Â  Â  â†’ / D = Right<br>
Â  Â  Â  ğŸ‘† Swipe = Mobile
Â  Â  </div>

Â  Â  <canvas id="gameCanvas" width="600" height="400"></canvas>

Â  Â  <div class="side-panel">
Â  Â  Â  <div class="side-box">
Â  Â  Â  Â  <h3>ğŸ“œ Rules</h3>
Â  Â  Â  Â  ğŸ¥œ Eat acorns = +1<br>
Â  Â  Â  Â  ğŸ”‘ Grab key = +10<br>
Â  Â  Â  Â  âŒ Donâ€™t hit yourself<br>
Â  Â  Â  Â  â© Snake speeds up slowly<br>
Â  Â  Â  Â  ğŸŒ Wrap around edges
Â  Â  Â  </div>
Â  Â  Â  <img src="Generated Image September 12, 2025 - 6_21PM.png" alt="Tomato Man" id="tomatoMan">
Â  Â  </div>
Â  </div>

Â  <div id="ui">
Â  Â  <button id="startBtn">Start Game</button>
Â  Â  <button id="pauseBtn" style="display:none;">Pause</button>
Â  Â  <button id="resumeBtn" style="display:none;">Resume</button>
Â  Â  <button id="restartBtn" style="display:none;">Restart</button>
Â  Â  <button id="fullscreenBtn">Fullscreen</button>
Â  </div>

Â  <script>
Â  Â  const canvas = document.getElementById("gameCanvas");
Â  Â  const ctx = canvas.getContext("2d");

Â  Â  const startBtn = document.getElementById("startBtn");
Â  Â  const pauseBtn = document.getElementById("pauseBtn");
Â  Â  const resumeBtn = document.getElementById("resumeBtn");
Â  Â  const restartBtn = document.getElementById("restartBtn");
Â  Â  const fullscreenBtn = document.getElementById("fullscreenBtn");

Â  Â  let gridSize = 25;
Â  Â  let cols = canvas.width / gridSize;
Â  Â  let rows = canvas.height / gridSize;
Â  Â  const baseCols = cols;
Â  Â  const baseRows = rows;

Â  Â  let snake, direction, nextDirection, food, score, gameInterval, gameRunning, speed;

Â  Â  const acorn = new Image();
Â  Â  acorn.src = "acorn.png";
Â  Â  const mooseHead = new Image();
Â  Â  mooseHead.src = "moose.png";
Â  Â  const keyImg = new Image();
Â  Â  keyImg.src = "key.png";

Â  Â  let key = null;
Â  Â  let keyVisible = false;
Â  Â  let keyTimer, keySpawnTimer;
Â  Â  let fullscreen = false;

Â  Â  function resizeCanvas() {
Â  Â  Â  if (fullscreen) {
Â  Â  Â  Â  canvas.width = window.innerWidth;
Â  Â  Â  Â  canvas.height = window.innerHeight;
Â  Â  Â  } else if (window.innerWidth < 768) {
Â  Â  Â  Â  canvas.width = Math.floor(window.innerWidth * 0.9);
Â  Â  Â  Â  canvas.height = Math.floor(window.innerHeight * 0.5);
Â  Â  Â  } else {
Â  Â  Â  Â  canvas.width = 600;
Â  Â  Â  Â  canvas.height = 400;
Â  Â  Â  }
Â  Â  Â  gridSize = Math.floor(Math.min(canvas.width / baseCols, canvas.height / baseRows));
Â  Â  Â  cols = Math.floor(canvas.width / gridSize); // Recalculate cols and rows
Â  Â  Â  rows = Math.floor(canvas.height / gridSize);
Â  Â  }
Â  Â  resizeCanvas();
Â  Â  window.addEventListener("resize", resizeCanvas);

Â  Â  function resetGame() {
Â  Â  Â  snake = [{ x: 5, y: 5 }];
Â  Â  Â  direction = { x: 1, y: 0 };
Â  Â  Â  nextDirection = { x: 1, y: 0 };
Â  Â  Â  score = 0;
Â  Â  Â  speed = 150;
Â  Â  Â  placeFood();
Â  Â  Â  removeKey();
Â  Â  Â  scheduleKey();
Â  Â  }

Â  Â  function placeFood() {
Â  Â  Â  let valid = false;
Â  Â  Â  while (!valid) {
Â  Â  Â  Â  food = { x: Math.floor(Math.random() * cols), y: Math.floor(Math.random() * rows) };
Â  Â  Â  Â  valid = !snake.some(seg => seg.x === food.x && seg.y === food.y);
Â  Â  Â  Â  if (food.y < 2) valid = false;
Â  Â  Â  }
Â  Â  }

Â  Â  function placeKey() {
Â  Â  Â  let valid = false;
Â  Â  Â  while (!valid) {
Â  Â  Â  Â  key = { x: Math.floor(Math.random() * cols), y: Math.floor(Math.random() * rows) };
Â  Â  Â  Â  valid = !snake.some(seg => seg.x === key.x && seg.y === key.y) &&
Â  Â  Â  Â  Â  Â  Â  Â  !(food.x === key.x && food.y === key.y);
Â  Â  Â  Â  if (key.y < 2) valid = false;
Â  Â  Â  }
Â  Â  Â  keyVisible = true;
Â  Â  Â  clearTimeout(keyTimer);
Â  Â  Â  keyTimer = setTimeout(removeKey, 8000);
Â  Â  }

Â  Â  function removeKey() {
Â  Â  Â  key = null;
Â  Â  Â  keyVisible = false;
Â  Â  Â  scheduleKey();
Â  Â  }

Â  Â  function scheduleKey() {
Â  Â  Â  clearTimeout(keySpawnTimer);
Â  Â  Â  keySpawnTimer = setTimeout(() => {
Â  Â  Â  Â  if (!keyVisible) placeKey();
Â  Â  Â  }, 10000);
Â  Â  }

Â  Â  function drawGrid() {
Â  Â  Â  ctx.strokeStyle = "rgba(255, 255, 255, 0.1)";
Â  Â  Â  ctx.lineWidth = 1;
Â  Â  Â  for (let x = 0; x <= cols; x++) {
Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  ctx.moveTo(x * gridSize, 0);
Â  Â  Â  Â  ctx.lineTo(x * gridSize, rows * gridSize);
Â  Â  Â  Â  ctx.stroke();
Â  Â  Â  }
Â  Â  Â  for (let y = 0; y <= rows; y++) {
Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  ctx.moveTo(0, y * gridSize);
Â  Â  Â  Â  ctx.lineTo(cols * gridSize, y * gridSize);
Â  Â  Â  Â  ctx.stroke();
Â  Â  Â  }
Â  Â  Â  ctx.strokeStyle = "#ffb703";
Â  Â  Â  ctx.lineWidth = 3;
Â  Â  Â  ctx.strokeRect(0, 0, cols * gridSize, rows * gridSize);
Â  Â  }

Â  Â  function drawSnake() {
Â  Â  Â  snake.forEach((segment, index) => {
Â  Â  Â  Â  if (index === 0) drawMooseHead(segment.x, segment.y);
Â  Â  Â  Â  else {
Â  Â  Â  Â  Â  ctx.fillStyle = "#219ebc";
Â  Â  Â  Â  Â  ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize, gridSize);
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  }

Â  Â  function drawMooseHead(x, y) {
Â  Â  Â  const size = gridSize * 1.6;
Â  Â  Â  const cx = x * gridSize + gridSize / 2;
Â  Â  Â  const cy = y * gridSize + gridSize / 2;
Â  Â  Â  const imageRotationOffset = Math.PI / 2;
Â  Â  Â  const angle = Math.atan2(direction.y, direction.x) + imageRotationOffset;
Â  Â  Â  ctx.save();
Â  Â  Â  ctx.translate(cx, cy);
Â  Â  Â  ctx.rotate(angle);
Â  Â  Â  ctx.drawImage(mooseHead, -size / 2, -size / 2, size, size);
Â  Â  Â  ctx.restore();
Â  Â  }

Â  Â  function drawFood() {
Â  Â  Â  ctx.drawImage(acorn, food.x * gridSize, food.y * gridSize, gridSize, gridSize);
Â  Â  }

Â  Â  function drawKey() {
Â  Â  Â  if (keyVisible && key) {
Â  Â  Â  Â  const size = gridSize * 1.2;
Â  Â  Â  Â  ctx.shadowColor = "#ffd700";
Â  Â  Â  Â  ctx.shadowBlur = 15;
Â  Â  Â  Â  ctx.drawImage(keyImg, key.x * gridSize, key.y * gridSize, size, size);
Â  Â  Â  Â  ctx.shadowBlur = 0;
Â  Â  Â  }
Â  Â  }

Â  Â  function drawScore() {
Â  Â  Â  ctx.fillStyle = "rgba(0,0,0,0.5)";
Â  Â  Â  ctx.fillRect(5, 5, 160, 30);
Â  Â  Â  ctx.fillStyle = "white";
Â  Â  Â  ctx.font = "16px 'Press Start 2P', cursive";
Â  Â  Â  ctx.textAlign = "left";
Â  Â  Â  ctx.fillText("Score: " + score, 15, 28);
Â  Â  }

    // New function to draw the start button on the canvas
    function drawStartButton() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.5)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        const btnWidth = 200;
        const btnHeight = 60;
        const btnX = (canvas.width / 2) - (btnWidth / 2);
        const btnY = (canvas.height / 2) - (btnHeight / 2);
        ctx.fillStyle = "#ffb703";
        ctx.fillRect(btnX, btnY, btnWidth, btnHeight);

        ctx.fillStyle = "#023047";
        ctx.font = "24px 'Press Start 2P', cursive";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText("Start Game", canvas.width / 2, canvas.height / 2);
    }

Â  Â  function update() {
Â  Â  Â  const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };
Â  Â  Â  if (head.x < 0) head.x = cols - 1;
Â  Â  Â  if (head.x >= cols) head.x = 0;
Â  Â  Â  if (head.y < 0) head.y = rows - 1;
Â  Â  Â  if (head.y >= rows) head.y = 0;

Â  Â  Â  if (snake.some(seg => seg.x === head.x && seg.y === head.y)) {
Â  Â  Â  Â  gameOver();
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  snake.unshift(head);

Â  Â  Â  if (head.x === food.x && head.y === food.y) {
Â  Â  Â  Â  score++;
Â  Â  Â  Â  placeFood();
Â  Â  Â  Â  speed = Math.max(100, 150 * Math.pow(0.99, score));
Â  Â  Â  Â  clearInterval(gameInterval);
Â  Â  Â  Â  gameInterval = setInterval(gameLoop, speed);
Â  Â  Â  } else if (keyVisible && key && head.x === key.x && head.y === key.y) {
Â  Â  Â  Â  score += 10;
Â  Â  Â  Â  removeKey();
Â  Â  Â  } else {
Â  Â  Â  Â  snake.pop();
Â  Â  Â  }

Â  Â  Â  direction = nextDirection;
Â  Â  }

    // Updated draw function to handle the on-canvas button
Â  Â  function draw() {
Â  Â  Â  const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
Â  Â  Â  gradient.addColorStop(0, "#0d1b2a");
Â  Â  Â  gradient.addColorStop(1, "#1b263b");
Â  Â  Â  ctx.fillStyle = gradient;
Â  Â  Â  ctx.fillRect(0, 0, canvas.width, canvas.height);

      if (fullscreen && !gameRunning) {
          drawStartButton();
      } else if (gameRunning) {
          drawGrid();
          drawFood();
          drawKey();
          drawSnake();
          drawScore();
      }
Â  Â  }

Â  Â  function gameLoop() {
Â  Â  Â  update();
Â  Â  Â  draw();
Â  Â  }

Â  Â  function startGame() {
Â  Â  Â  resetGame();
Â  Â  Â  gameRunning = true;
Â  Â  Â  startBtn.style.display = "none";
Â  Â  Â  pauseBtn.style.display = "inline-block";
Â  Â  Â  resumeBtn.style.display = "none";
Â  Â  Â  restartBtn.style.display = "none";
Â  Â  Â  clearInterval(gameInterval);
Â  Â  Â  gameInterval = setInterval(gameLoop, speed);
      draw(); // Initial draw to start the loop
Â  Â  }

Â  Â  function pauseGame() {
Â  Â  Â  clearInterval(gameInterval);
Â  Â  Â  gameRunning = false;
Â  Â  Â  pauseBtn.style.display = "none";
Â  Â  Â  resumeBtn.style.display = "inline-block";
Â  Â  }

Â  Â  function resumeGame() {
Â  Â  Â  if (!gameRunning) {
Â  Â  Â  Â  gameRunning = true;
Â  Â  Â  Â  gameInterval = setInterval(gameLoop, speed);
Â  Â  Â  Â  pauseBtn.style.display = "inline-block";
Â  Â  Â  Â  resumeBtn.style.display = "none";
Â  Â  Â  }
Â  Â  }

Â  Â  function gameOver() {
Â  Â  Â  clearInterval(gameInterval);
Â  Â  Â  gameRunning = false;
Â  Â  Â  alert("Game Over!\nScore: " + score);
Â  Â  Â  restartBtn.style.display = "inline-block";
Â  Â  Â  pauseBtn.style.display = "none";
Â  Â  Â  resumeBtn.style.display = "none";
Â  Â  }

Â  Â  document.addEventListener("keydown", (e) => {
Â  Â  Â  const key = e.key.toLowerCase();
Â  Â  Â  if ((key === "arrowup" || key === "w") && direction.y !== 1) nextDirection = { x: 0, y: -1 };
Â  Â  Â  if ((key === "arrowdown" || key === "s") && direction.y !== -1) nextDirection = { x: 0, y: 1 };
Â  Â  Â  if ((key === "arrowleft" || key === "a") && direction.x !== 1) nextDirection = { x: -1, y: 0 };
Â  Â  Â  if ((key === "arrowright" || key === "d") && direction.x !== -1) nextDirection = { x: 1, y: 0 };
Â  Â  });

Â  Â  let touchStartX = 0, touchStartY = 0;
Â  Â  let touchEndX = 0, touchEndY = 0;

Â  Â  canvas.addEventListener("touchstart", (e) => {
Â  Â  Â  const touch = e.touches[0];
Â  Â  Â  touchStartX = touch.clientX;
Â  Â  Â  touchStartY = touch.clientY;
Â  Â  });

Â  Â  canvas.addEventListener("touchend", (e) => {
Â  Â  Â  const touch = e.changedTouches[0];
Â  Â  Â  touchEndX = touch.clientX;
Â  Â  Â  touchEndY = touch.clientY;
Â  Â  Â  handleSwipe();
Â  Â  });

Â  Â  function handleSwipe() {
Â  Â  Â  const dx = touchEndX - touchStartX;
Â  Â  Â  const dy = touchEndY - touchStartY;
Â  Â  Â  if (Math.abs(dx) > Math.abs(dy)) {
Â  Â  Â  Â  if (dx > 30 && direction.x !== -1) nextDirection = { x: 1, y: 0 };
Â  Â  Â  Â  if (dx < -30 && direction.x !== 1) nextDirection = { x: -1, y: 0 };
Â  Â  Â  } else {
Â  Â  Â  Â  if (dy > 30 && direction.y !== -1) nextDirection = { x: 0, y: 1 };
Â  Â  Â  Â  if (dy < -30 && direction.y !== 1) nextDirection = { x: 0, y: -1 };
Â  Â  Â  }
Â  Â  }

    // New event listener for canvas clicks
    canvas.addEventListener("click", (e) => {
        if (!gameRunning && fullscreen) {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            const btnWidth = 200;
            const btnHeight = 60;
            const btnX = (canvas.width / 2) - (btnWidth / 2);
            const btnY = (canvas.height / 2) - (btnHeight / 2);

            if (mouseX >= btnX && mouseX <= btnX + btnWidth &&
                mouseY >= btnY && mouseY <= btnY + btnHeight) {
                startGame();
            }
        }
    });

Â  Â  function enterFullscreen() {
Â  Â  Â  if (canvas.requestFullscreen) {
Â  Â  Â  Â  canvas.requestFullscreen();
Â  Â  Â  } else if (canvas.webkitRequestFullscreen) {
Â  Â  Â  Â  canvas.webkitRequestFullscreen();
Â  Â  Â  } else if (canvas.msRequestFullscreen) {
Â  Â  Â  Â  canvas.msRequestFullscreen();
Â  Â  Â  }
Â  Â  }

Â  Â  function exitFullscreen() {
Â  Â  Â  if (document.exitFullscreen) {
Â  Â  Â  Â  document.exitFullscreen();
Â  Â  Â  }
Â  Â  }

Â  Â  fullscreenBtn.addEventListener("click", () => {
Â  Â  Â  if (!fullscreen) {
Â  Â  Â  Â  enterFullscreen();
Â  Â  Â  } else {
Â  Â  Â  Â  exitFullscreen();
Â  Â  Â  }
Â  Â  });

Â  Â  document.addEventListener("fullscreenchange", () => {
Â  Â  Â  fullscreen = !!document.fullscreenElement;
Â  Â  Â  resizeCanvas();
Â  Â  Â  document.getElementById("ui").style.display = fullscreen ? "none" : "block";
Â  Â  Â  document.querySelector(".side-panel").style.display = fullscreen ? "none" : "flex";
      // Redraw the canvas to show or hide the on-canvas button
      draw();
Â  Â  });

Â  Â  startBtn.addEventListener("click", startGame);
Â  Â  pauseBtn.addEventListener("click", pauseGame);
Â  Â  resumeBtn.addEventListener("click", resumeGame);
Â  Â  restartBtn.addEventListener("click", startGame);
Â  </script>
</body>
</html>
